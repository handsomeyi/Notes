# Java中ArrayList 扩容的代价


---

ArrayList 是一个可以扩容的东西,  
一开始有一个初始长度, 往里加数, 加满了, 它会扩容  
大小翻一倍  
问: 即便算上扩容代价, 这个扩容代价均摊下来是 O(1)  
底层就是一个连续的数组结构  
ArrayList中在index 位置插入一个number 代价是 O(n)  
需要把后面所有东西整体向右挪一个位置, 腾出这个位置,   
然后这个number进来, 这个是O(N)的

```text
[ ] 1
[  ] 2
[    ] 4
[        ] 8
[                ] 16

如果要加入N个数, 扩容的代价是1+2+4+8+....+N
是一个等比数列优化以后是接近N的规模的
所以加入N个数扩容的总代价是O(N), 
加入一个数, 这个扩容代价均摊下来是 O(1) 

```
所以我们说:  
动态数组虽然有扩容,  但其实对它整体性能在时间复杂度的影响上 没有
它做到了个跟固定数组一样的好, 还支持动态扩容
动态数组有扩容, 当然会比固定数组要慢一点, 但这种慢只是常数时间的慢, 从复杂度的角度来说, 没影响! 在工程上几乎是感觉不到的.

Python的List不一样, 是一颗有序树, 平衡搜索二叉树
