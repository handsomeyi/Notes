# å­æ•°ç»„æœ€å°çš„ç´¯åŠ å’Œ

ç»™å®šä¸€ä¸ªæ•°ç»„arrï¼Œ

è¿”å›æ‰€æœ‰å­æ•°ç»„æœ€å°å€¼çš„ç´¯åŠ å’Œ



## è§£é¢˜



åŒæ•°çš„è§£å†³æ€è·¯ ! ! !

![image-20211030151434222](https://raw.githubusercontent.com/handsomeyi/Pics/master/image-20211030151434222.png)

**ç»“å°¾, åˆ°ç›¸ç­‰çš„æ—¶å€™åœä½.**





```java
public static int sumSubarrayMins(int[] arr) {
   int[] stack = new int[arr.length];
   int[] left = nearLessEqualLeft(arr, stack);// å°äº
   int[] right = nearLessRight(arr, stack);
   long ans = 0;
   for (int i = 0; i < arr.length; i++) {
      long start = i - left[i];//å·¦è¾¹å…ƒç´ æ•°
      long end = right[i] - i;//å³è¾¹å…ƒç´ æ•°
      ans += start * end * (long) arr[i];//å·¦Ã—å³Ã—å­æ•°ç»„æœ€æœ€å°å€¼
      ans %= 1000000007;
   }
   return (int) ans;
}

public static int[] nearLessEqualLeft(int[] arr, int[] stack) {
   int N = arr.length;
   int[] left = new int[N];
   int size = 0;
   for (int i = N - 1; i >= 0; i--) {
      while (size != 0 && arr[i] <= arr[stack[size - 1]]) {
         left[stack[--size]] = i;
      }
      stack[size++] = i;
   }
   while (size != 0) {
      left[stack[--size]] = -1;
   }
   return left;
}

public static int[] nearLessRight(int[] arr, int[] stack) {
   int N = arr.length;
   int[] right = new int[N];
   int size = 0;
   for (int i = 0; i < N; i++) {
      while (size != 0 && arr[stack[size - 1]] > arr[i]) {
         right[stack[--size]] = i;
      }
      stack[size++] = i;
   }
   while (size != 0) {
      right[stack[--size]] = N;
   }
   return right;
}
```

# æ–æ³¢é‚£å¥‘çŸ©é˜µ

æ™®é€šæ–æ³¢é‚£å¥‘æ•°åˆ—è§£æ³•

```java
  public int fib(int n) {
    int a = 0, b = 1, sum;
        for(int i = 0; i < n; i++){
        sum = (a + b) % 1000000007;
        a = b;
        b = sum;
        }
     return a;
  }
```



![image-20211030154903223](https://raw.githubusercontent.com/handsomeyi/Pics/master/image-20211030154903223.png)

## è§£é¢˜

## æ€»ç»“

==**è§£é¢˜æ€æƒ³**==

ä»¥iä½ç½®çš„æ•°åšæŸä¸€ä¸ªæ ‡å‡†ä¸‹çš„ç­”æ¡ˆ, ä¸‹ä¸€ä¸ªæ•°åšæŸä¸€ä¸ªæ ‡å‡†ä¸‹çš„ç­”æ¡ˆ, å†ä¸‹ä¸€æ¬¡åšæŸä¸€ä¸ªæ ‡å‡†ä¸‹çš„ç­”æ¡ˆ

åˆèµ·æ¥å°±æ˜¯æ€»ç­”æ¡ˆ



åªè¦

æœ‰å›ºå®šçš„é€’æ¨å¼, å°±ä¼šæœ‰O(logN)çš„æ–¹æ³•

å¦‚ä¸‹, çº¿æ€§ä»£æ•°çš„æ€æƒ³: 

![image-20211030160258783](https://raw.githubusercontent.com/handsomeyi/Pics/master/image-20211030160258783.png)

---

å¾—åˆ°é€šå¼:

![image-20211030160547388](https://raw.githubusercontent.com/handsomeyi/Pics/master/image-20211030160547388.png)

---

ä¸Šé¢è¿™ä¸ªé€šå¼è¦æ±‚ä¸€ä¸ªæ•°çš„Næ¬¡æ–¹ 

æ±‚ä¸€ä¸ªæ•°çš„Næ¬¡æ–¹, æœ¬æ¥è¦**O(N)** , ä¼˜åŒ–åçš„æœ€å°ä»£ä»· æ˜¯**O(logN)** 

![image-20211030162105257](https://raw.githubusercontent.com/handsomeyi/Pics/master/image-20211030162105257.png)

---

å•ä½çŸ©é˜µçš„æ¦‚å¿µ

![image-20211030162953474](https://raw.githubusercontent.com/handsomeyi/Pics/master/image-20211030162953474.png)

---

ä¾‹å­:

![image-20211030164803528](https://raw.githubusercontent.com/handsomeyi/Pics/master/image-20211030164803528.png)



# æ¯ç‰›ç”Ÿå´½

ç¬¬ä¸€å¹´å†œåœºæœ‰1åªæˆç†Ÿçš„æ¯ç‰›Aï¼Œå¾€åçš„æ¯å¹´ï¼š

1ï¼‰æ¯ä¸€åªæˆç†Ÿçš„æ¯ç‰›éƒ½ä¼šç”Ÿä¸€åªæ¯ç‰›

2ï¼‰æ¯ä¸€åªæ–°å‡ºç”Ÿçš„æ¯ç‰›éƒ½åœ¨å‡ºç”Ÿçš„ç¬¬ä¸‰å¹´æˆç†Ÿ

3ï¼‰æ¯ä¸€åªæ¯ç‰›æ°¸è¿œä¸ä¼šæ­»

è¿”å›Nå¹´åç‰›çš„æ•°é‡

## è§£é¢˜

åˆ—æ•°å­—å‘ç°: **F(n) = F(n-1) + F(n-3)**



F4, F3, F2

![image-20211030165715830](https://raw.githubusercontent.com/handsomeyi/Pics/master/image-20211030165715830.png)

---



F3, F4, F5 å†åˆ†æ F4, F5, F6 å¾—åˆ°çš„ å¤šé¡¹å¼, å¯ä»¥è§£å‡ºabcdefghi

![image-20211030165949784](https://raw.githubusercontent.com/handsomeyi/Pics/master/image-20211030165949784.png)





# è¿”å›è¾¾æ ‡å­—ç¬¦ä¸²

ç»™å®šä¸€ä¸ªæ•°Nï¼Œæƒ³è±¡åªç”±0å’Œ1ä¸¤ç§å­—ç¬¦ï¼Œç»„æˆçš„æ‰€æœ‰é•¿åº¦ä¸ºNçš„å­—ç¬¦ä¸²

å¦‚æœæŸä¸ªå­—ç¬¦ä¸²,ä»»ä½•0å­—ç¬¦çš„å·¦è¾¹éƒ½æœ‰1ç´§æŒ¨ç€,

è®¤ä¸ºè¿™ä¸ªå­—ç¬¦ä¸²è¾¾æ ‡

è¿”å›æœ‰å¤šå°‘è¾¾æ ‡çš„å­—ç¬¦ä¸²

## è§£é¢˜

**è§‚å¯Ÿå‘ç°**: 

N=1	1ä¸ªè¾¾æ ‡

N=2	2ä¸ªè¾¾æ ‡

N=3	3ä¸ªè¾¾æ ‡

N=4	5ä¸ªè¾¾æ ‡

N=5	8ä¸ªè¾¾æ ‡

N=6	13ä¸ªè¾¾æ ‡



å¹¶ä¸”: è¿˜æœ‰ä¸€ä¸ªè§‚å¯Ÿçš„è¿‡ç¨‹, å°±æ˜¯å¤ªæŠ½è±¡äº†!

![image-20211030172015800](https://raw.githubusercontent.com/handsomeyi/Pics/master/image-20211030172015800.png)

F(i)å°±æ˜¯è¿˜å‰©ç¬¬ä¸€ä¸ªæ•°ä¸º1, è¿˜å‰©iä¸ªæ•°è¦å»å†³å®š





å¦‚æœç¬¬äºŒä¸ªæ•°é€‰1, æ¥ä¸‹æ¥çš„é€‰æ‹©å°±ç­‰ä»·äº F(i-1)

å¦‚æœç¬¬äºŒä¸ªæ•°é€‰0, æ¥ä¸‹æ¥çš„é€‰æ‹©å°±ç­‰ä»·äº F(i-2)---------( å› ä¸ºé€‰äº†0, ç¬¬ä¸‰ä¸ªæ•°å¿…ç„¶ä¸º1, æ‰€ä»¥å°±æ˜¯F(i-2) )



# æ€»ç»“

(**ä¸èƒ½æœ‰æ¡ä»¶è½¬ç§», å³ä¸èƒ½æœ‰ifé€‰æ‹©çŠ¶æ€è¿™ç§äº‹æƒ…** å‘ç”Ÿ)                                                                                                                                                                                                             1è¯·222222222222	                                                                                                         

æ–æ³¢é‚£å¥‘æ•°åˆ—é—®é¢˜æ€è€ƒæ€è·¯: å‘çŠ¶æ€è½¬ç§»ä¸Šé 

![image-20211030173509786](https://raw.githubusercontent.com/handsomeyi/Pics/master/image-20211030173509786.png)





## é€’å½’ + å¿«é€Ÿå¹‚ï¼ˆå¯é€‰ï¼‰

å®«æ°´ä¸‰å¶: https://leetcode-cn.com/problems/super-pow/solution/gong-shui-san-xie-di-gui-kuai-su-mi-ying-yx1j/

---

âˆ‘: æ±‚å’Œ

âˆ: æ±‚ç§¯



é€’å½’ + å¿«é€Ÿå¹‚ï¼ˆå¯é€‰ï¼‰
æ ¹æ®é¢˜æ„ï¼Œè¦æˆ‘ä»¬æ±‚å¾—çš„æ˜¯ a^b \bmod {1337}a 
b
 mod1337 çš„å€¼ï¼Œå…¶ä¸­ bb æ˜¯ä»¥æ•°ç»„å½¢å¼ç»™å‡ºã€‚

åˆšä¸€çœ‹æ˜¯ä¸€é“å¿«é€Ÿå¹‚çš„é¢˜ç›®ï¼ˆäº‹å®ä¸Šä¹Ÿç¡®å®å¯ä»¥ä½¿ç”¨å¿«é€Ÿå¹‚ï¼Œä½†ä¸æ˜¯å¿…é¡»ï¼‰ï¼Œä½†ç”±äº bb æ˜¯æ•°ç»„å½¢å¼ï¼Œå› æ­¤æˆ‘ä»¬è¿˜éœ€è¦å¯¹å…¶è¿›è¡Œåˆ†è§£ã€‚

å‡è®¾ bb æ‰€ä»£è¡¨çš„æ•°å€¼ä¸º KKï¼Œåˆ™æœ‰ï¼š

![image-20211205104412680](https://s2.loli.net/2021/12/05/PnWtERLqDlTG6cH.png)

ä¹Ÿå°±æ˜¯è¯´ï¼Œæˆ‘ä»¬æ¯æ¬¡åªéœ€è¦è®¡ç®— bb æ•°ç»„çš„æœ€åä¸€ä½ä½œä¸ºæ¬¡æ–¹çš„å€¼å³å¯å°†é—®é¢˜è§„æ¨¡ç¼©å°ã€‚

ä¸Šè¿°å…¬å¼å¯èƒ½ä¸å¥½ç›´æ¥ç†è§£ï¼Œä¸¾ä¸ªğŸŒ°ï¼Œè®¾æˆ‘ä»¬çš„ aa ä¸º 9999ï¼Œè¦è®¡ç®—çš„ bb æ•°ç»„æ‰€ä»£è¡¨çš„æ•°å€¼ä¸º K = 2345K=2345ï¼Œé‚£ä¹ˆå…¶è®¡ç®—è¿‡ç¨‹å¯ä»¥åˆ†è§£ä¸ºï¼š

![image-20211205104433105](https://s2.loli.net/2021/12/05/v2QmsyPIOcU9ux3.png)



å¯è§ï¼Œ**==çœŸæ­£æ¶‰åŠè®¡ç®—æ¬¡æ–¹çš„æ“ä½œï¼Œæ‰€ç”¨åˆ°çš„æ¬¡æ–¹éƒ½æ˜¯ä¸€ä¸ª 10 ä»¥å†…çš„æ•°å­—==**ï¼Œå› æ­¤å¹¶éä¸€å®šè¦ä½¿ç”¨å¿«é€Ÿå¹‚ã€‚



```java
//O(n*10)
class Solution {
    int MOD = 1337;
    public int superPow(int a, int[] b) {
        return dfs(a, b, b.length - 1);
    }
    
    
    int dfs(int a, int[] b, int u) {
        if (u == -1) return 1;//æŒ‡æ•°é›¶ç›´æ¥è¿”å›1
        //99^2ç®—å®Œ ç„¶åpow10 
        return pow(dfs(a, b, u - 1), 10) * pow(a, b[u]) % MOD;//è¿”å›æ¨¡æ•°
        //æ ˆåº•çš„è¿ç®—ç»“æœ (æ¨¡æ•°^10 ç„¶åå†Ã—99^5) % MOD å³å¯
    }
   
    int pow(int a, int b) {
        int ans = 1;
        a %= MOD;
        while (b-- > 0) ans = ans * a % MOD;
        return ans;
    }
}
```



```java
//å¿«é€Ÿå¹‚ç‰ˆæœ¬ O(n*log10)
class Solution {
    int MOD = 1337;
    public int superPow(int a, int[] b) {
        return dfs(a, b, b.length - 1);
    }
    int dfs(int a, int[] b, int u) {
        if (u == -1) return 1;
        return qpow(dfs(a, b, u - 1), 10) * qpow(a, b[u]) % MOD;
    }
    int qpow(int a, int b) {
        int ans = 1;
        a %= MOD;
        while (b != 0) {
            if ((b & 1) != 0) ans = ans * a % MOD;
            a = a * a % MOD;
            b >>= 1;
        }
        return ans;
    }
}
```





























