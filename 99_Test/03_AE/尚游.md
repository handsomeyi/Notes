# 笔试

10进制转2进制

```java
public static String ten2Two(int n) {
    if (n == 0) return "0";
    Deque<Integer> stack = new ArrayDeque<>();
    while (n != 0) {
        stack.push(n & 1);
        n >>= 1;
    }
    StringBuilder sb = new StringBuilder();
    while (!stack.isEmpty()) {
        sb.append(stack.poll());
    }
    return sb.toString();
}
```

二叉树层数大小

20个端口的交换机 每个端口的速率是多少

插入排序的趟数



冒泡排序趟数原理

前序遍历 中序遍历 后序遍历 实现 递归 morris遍历



黑高硬的人是谁

斐波那契数列

ThreadLocal原理

进程 线程 协程

list.stream().......(Java8流处理)



字符串转int

两个栈实现队列





# 二面

1. **设计 Protobuf 协议文档, 并且生成相应的代码, 以及实现消息解码器和消息编码器.**

   Google的成熟消息协议框架, 通过对各种信息的分析得出一类变量, 写成一种类似键值对的形式. 然后通过protoc.exe文件生成相应的java代码. 就可以在业务中用到这个类. 

   ```protobuf
   syntax = “proto3”;
   package msg;
   option java_package - "org.tinygame.herostory.msg"
   enum MsgCode {
   	......
   	USER_ATTK_CMD = 9;
   	USER_ATTK_RESULT = 10;
   	......
   }
   message UserEntryCmd {
       uint32 userId = 1;    // 用户 Id
       string heroAvatar = 2;    // 英雄形象
   }
   message UserEntryResult {
       uint32 userId = 1;    // 用户 Id
       string heroAvatar = 2;    // 英雄形象
   }
       消息命名规则是 XxxCmd 和 XxxResult；
       XxxCmd 代表客户端发往服务器的消息；
       XxxResult 代表服务器返回给客户端的消息；
       UserEntryCmd；
       UserEntryResult；
       ......
   ```

   

2. **角色移动模块: 参与设计并实现了角色入场, 角色移动, 以及角色离场等实时功能.**

   用的channelGroup广播消息 => Netty的网络框架 NIO 非常高性能的框架

   通过状态同步来实现, 有一个 **state属性** 里面的**startTime** => 记录了移动时的时间 => 服务器时间
   通过channelGroup 来广播消息 => 每动一下就广播一下.

3. **排行榜系统: 利用 Redis+RocketMQ 实现击杀排行榜系统.**

   Redis + RocketMQ

   是存在库里 => 用户要的时候才返回(并不是实时的)

   1. 服务器生产数据 userId 击杀信息 死亡信息 => 发给RocketMQ
   2. RocketMQ => 排行榜进程(排名逻辑处理) => 写到Redis
   3. 最后用户再要排名的时候再从Redis取排名数据

4. **日志系统: 利用 Filebeat+Elasticsearch+Kibana 实现日志功能.**

   如何**配置**?

   **==装好Filebeat => 修改filebeat.yml配置文件== =>** 

   **==配置log目录位置, 配置es网络位置, Kibana网络位置==**

   配置完后他会自动帮你捞日志 => 直接通过Kibana看就行啦! 

5. **优化: 利用工厂模式对消息处理模块进行优化.**



1. **乘客和司机端登陆模块: 生成验证码, 调用第三方服务发送验证码, 校验验证码, 通过JWT生成token, 在网关进行校验.**

   api-passenger ribbon调用 验证码服务(生成验证码并存到redis设置过期时间)

   token（令牌）是一串唯一的字符串，通常由服务端生成，在注册完成时返回给客户端，用来标识此用户，客户端将此字符串存储在本地。在以后的网络请求时，客户端先查询本地的token，如果有则直接使用此令牌进行网络请求，没有则提示未登录，转到登陆注册界面。  此外，还可以在服务端或者客户端添加过期判别机制。

   

2. **灰度发布(为了支持A/B testing): 参与了灰度发布的实现, 利用Zuul和Ribbon, 通过网关与服务之间, 服务与服务之间两种方式进行灰度发布**

   - **蓝绿发布(最高同时6台同时运行)**
   - **滚动发布(最高同时4台同时运行)**
   - **灰度发布(金丝雀发布)**
     - 原来的系统⚪	⚪	⚪
     - 开新的系统⚫
     - 让一小部分人先来⚫, 如果可以, 继续扩大来⚫的比例

3. **预估价格模块: 收藏路线, 创建订单, 获取地图资源, 获取计价规则, 存储计价规则.**

   简单的逻辑刚开始进公司实习时，还没有分配迭代任务，主管就叫我先看看业务代码，看了yuser和login服务，发现登陆接口那块，由于它登陆有很多种方式嘛，手机号，账号密码，邮箱登陆这些，然后又有不同用户类型，租户之类的，会有很多if-else分支，然后就尝试使用策略模式对代码进行重构，避免过多的if-else分支，而且，要是以后再新增其他登陆方式，用if-else，可能又需要改动代码，而使用策略模式，直接增加一种登陆策略就可以。策略接口（登陆方法等接口），然后不同实现方法定义一个类实现策略接口，然后再定义一个环境类，根据传来的不同实现子类去调用不同实现方法即可。

4.  **优化: 发现生成验证码可以优化10倍速度; 利用策略模式对代码进行重构.**

```java
// 生成1~9.9999999的数 然后乘100000 然后转换成int 就是6位数 再转换为string
// 0~8.9999999 + 1 = 1.000000~9.999999 再乘10^6 = 100000 ~ 999999 随机
String code = String.valueOf((int)((Math.random() * 9 + 1) * 100000));
//因为都是int的操作 所以和string关系不大 所以快 
```

看了yuser和login服务，发现登陆接口那块，
由于它登陆有很多种方式嘛，手机号，账号密码，邮箱登陆这些，
然后又有不同用户类型，租户之类的，
会有很多if-else分支，然后就尝试使用策略模式对代码进行重构，**避免过多的if-else分支**，
**以后再新增其他登陆**方式，用if-else，可能又需要改动代码，而使用策略模式，直接增加一种登陆策略就可以。
策略接口（登陆方法等接口），然后不同实现方法定义一个类实现策略接口，
然后再定义一个环境类，根据传来的不同实现子类去调用不同实现方法即可。

# other

## 1

  然后根据我的笔试题问了我俩选择题一个代码题 

  自己建一个文本文档，他给题你写答案： 

  写一下冒泡两轮的一组数应该顺序是什么样的 

  写一个10进制到二进制数的转换 

 写一下代码非负数字符串转数字，这个非负字符串转成数字一定存在 
 打开编译器写一下冒泡[排序]()，要能运行

  逻辑题：25匹马，每轮只能上五匹马，问最少几轮能分出前三名 

  场景设计：随机匹配，已按积分[排序]()好，匹配的对手排名(还是分数???)差距不能超过一个数k，问怎么实现 

1 2 4 6 7 10 12 16 25 26 28
k = 5;

  说一下数组和[链表]()的区别 

  为什么数组查起来相对就快 

  析构函数可以是被虚函数 

  [算法]()学的如何 

  说一下二分查找

 大概就这些，答得不好，特别是手撕代码竟然犯了数组超限这种低级错误 

最后面试官说结果如何hr会联系我，也不知道凉了给不给感谢信 😥





## 2

发一下主管面的[面经]()吧，积攒人品，求过 

  **自我介绍** 

  **问我为什么想做游戏开发**

我认为网络游戏行业有着长久的, 可持续的发展前景. 贵公司也是一家非常有资历的公司, 我本人也有一点游戏开发的经验. 

想要为一款游戏的成功做出自己的贡献, 也是对自己的磨练, 想要进入游戏行业做出优秀的游戏.
游戏他不像一款软件或者网页, 他是一种**文化**, 带给人们的放松和娱乐, 多年后, 也是一群人的美好回忆, 不仅是用户, 也是游戏团队的.
相比于其他行业, 这种更具精神意义的行业是我所喜欢的.

  **喜欢玩什么游戏** 

部落冲突(SLG), 王者荣耀英雄联盟(MOBA), 还有原神, 深空之眼的RPG类, 

  **介绍一下王者荣耀和阴阳师各有什么吸引你的点，因什么原因弃游** 

  **完事直接问项目，指着==几个功能==问我怎么实现的，然后又问再让你做一遍会怎么样** 

看两项目

  **问你开发重视什么能力** 

重视代码的可读性, 性能. 在认知范围内做到最好. 并且了解技术的更新.

  **问什么时候感到压力很大** 

面试失败的时候, 因为之前准备不是很充分, 有很多公司笔试过了(深信服, 有道, 勇仕, 淘米)
但是面试经验差点, 基础没有特别牢固, 后来就在专注夯实基础, 

  **你有什么缺点** (最好是能力方面的问题, 而不是性格)

我这个人自尊心比较强, 觉得自己做的都是对的, 不愿意接受别人的帮助. 不想在别人眼里低人一等, 也非常在乎别人的看法, 但是经过大学的这几年, 遇到的事情更多, 现在发现把事情做好才是最重要的, 让事情朝着自己想的方法发展. 现在已经好了很多了. 没必要太在乎别人的眼光, 做好自己.





  **希望加入什么样的团队** 

有团队文化与团队合作氛围好的团队, 大家都很认真的氛围. 这样的团队我比较喜欢.



  **反问（你们做的mmo具体是哪一款，结果主管用惊讶的语气问我你难道不知道什么是mmo，我说我知道是大型多人线上游戏，我问的是你们招人的那个mmo组做的是官网上那个诺亚传说吗）** 

  **此时离谱的事情出现，主管又开始问我了** 

  **期望薪资多少（我说能在深圳活就行，这不会是凉点吧）** 

我看了公司在boss上的薪资范围是12-16, 我的期望薪资是13. 当然还是看贵公司对应届生的要求吧.

  问我是不是通过了[华为]()的面试，怎么样了 

  然后结尾又问了一个问题，我没听清，直接回的没想过 

  聊了得五十多分钟（？是我太能说还是主管问的细节多，我忘了） 

  不能总是主管面挂吧，让我过一个吧 

  希望主管面能过



# other

## 1

**问实习经历**
**C语言 unsigned short表示范围？**
**给道选择题，问给定序列不可能的出栈顺序**
**算法好像挺好的？（嘴贱说了还不错吧...）**
**博弈题，两个人轮流从一堆球中拿若干数量出来，一次只能拿3~6个，拿走最后一个球的人赢。现在有300个球，你作为先手方，要怎么处理才能赢？**
**char数组表示的字符串，O(n)判断是否有重复的字符串；还能怎么优化，根据char值为0~255的特点做特判**
**实现一个栈有pop、push、min（求栈中的最小值），要求所有操作的复杂度都是O(1)**
**有n个玩家，n为偶数，已经按实力值排好序，实现匹配玩家的算法，不能有遗漏**
**证明下你的解法一定是百分百正确的？**
**知道哪些设计模式？举举例子**

**为什么选择游戏行业？**
**游戏开发想做哪个方向？**
**对未来有什么规划？**

对未来的规划, 没有那么长, 三五年之内, 把自己的技术提升一个台阶, 本身对技术感兴趣, 对于游戏业务, 架构, 各种底层知识做一个深入研究, 希望以后能为公司在技术层面做出自己的贡献. 

## 2

**实习经历，得到的成长有哪些？**
**说说自己的优点和缺点？有哪些事情可以证明？**

学习能力还不错, 能刻苦, 能向一个方向钻研 => 两天就把深入理解java虚拟机大致看完了
也比较喜欢分享知识, 容易与人交流, 还有合群 => 有自己的github仓库, 总结自己的所有知识笔记.

我这个人自尊心比较强, 觉得自己做的都是对的, 不愿意接受别人的帮助. 不想在别人眼里低人一等, 也非常在乎别人的看法, 但是经过大学的这几年, 遇到的事情更多, 现在发现把事情做好才是最重要的, 让事情朝着自己想的方法发展. 现在已经好了很多了. 没必要太在乎别人的眼光, 做好自己.



**对于游戏公司自己最在意的是哪些方面？喜欢什么样的游戏产品？**

最在意的是在公司的氛围, 发展, 喜欢  游戏产品 => 

开发者: 成功的游戏产品, 毕竟关系到公司的利益, 符合用户体验
用户: 

**手头有哪些offer？说说对于另外几家游戏公司的看法？与尚游想比较下？**

**balala......**
**...**
**二面提问从工作到生活问的好多细节，讲了一个多钟头讲的我口干舌燥比技术面还累的多...😷**

